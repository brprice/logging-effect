<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.Log</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-Log.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">logging-effect-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.Log</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1"><code>MonadLog</code></a></li><li><a href="#g:2"><code>LoggingT</code>, a general handler</a></li><li><a href="#g:3">Message wrappers</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code> is a general purpose logging effect. Unlike other logging
libraries available on Hackage, <code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code> does <em>not</em> assume that you
will be logging text information. Instead, the choice of logging data
is up to you. This, combined with <code><a href="Control-Monad-Log.html#v:mapLogMessage">mapLogMessage</a></code> and the ability to
<em>reintepret</em> log messages results in an extremely powerful set of
logging combinators.</p><p>This library also comes with a flexible default implementation of
<code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code>. By using <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code>s along with their <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#t:Contravariant">Contravariant</a></code>,
<code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#t:Decidable">Decidable</a></code> and <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#t:Divisible">Divisible</a></code> instances, you are able to route log
messages to multiple sources.</p><p>We'll explore this power in the tutorial.</p><p><em>Tutorial</em>:</p><p>To add logging to your applications, you will need to make two changes.</p><p>First, use the <code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code> type class to indicate that a computation has
access to logging. <code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code> is parameterized on the type of messages
that you intend to log. In this example, we will log <code><a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></code> that is
wrapped in the <code><a href="Control-Monad-Log.html#t:WithUrgency">WithUrgency</a></code>. Note that this does <em>not</em> specify how
to perform the actual logging.</p><pre>testApp :: MonadLog (WithUrgency Text) m =&gt; m ()
testApp = do
  logMessage (WithUrgency Info &quot;Don't mind me&quot;)
  logMessage (WithUrgency Error &quot;But do mind me!&quot;)
</pre><p>Next, we need to run this computation under a <code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code> effect handler.
In this example, we open two file descriptor loggers, so we can dispatch
our log events to <code>STDOUT</code> and <code>STDERR</code>. We use <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#v:choose">choose</a></code> to split out log
messages between these two <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code>s - messages with a <code><a href="Control-Monad-Log.html#v:msgUrgency">msgUrgency</a></code> of
<code><a href="Control-Monad-Log.html#v:Error">Error</a></code> will go to <code>STDERR</code>, and all other messages will go to <code>STDOUT</code>.</p><p>Note that both our <code>STDOUT</code> and <code>STDERR</code> handlers only know how to log
<code><a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></code> (see the type of <code><a href="Control-Monad-Log.html#v:withFDHandler">withFDHandler</a></code>). However, we're logging
<code>WithUrgency</code> <code>Text</code>, so we need to adjust these handles. To do so, we
use <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#v:contramap">contramap</a></code> to adjust their inputs. For <code>stdoutHandler</code>, I use
<code><a href="Control-Monad-Log.html#v:renderWithUrgency">renderWithUrgency</a></code> to render the urgency information, and then pass the
log message through unchanged. For <code>stderrHandler</code> I also render the
urgency information, but I also transform the text into all caps -
I really don't want to miss those messages!</p><pre>withSplitLogging :: <code><a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a></code> (<code><a href="Control-Monad-Log.html#t:WithUrgency">WithUrgency</a></code> <code><a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></code>) <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/System-IO.html#t:IO">IO</a></code> () -&gt; <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/System-IO.html#t:IO">IO</a></code> ()
withSplitLogging m =
  <code><a href="Control-Monad-Log.html#v:withFDHandler">withFDHandler</a></code> <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-IO-Handle-FD.html#v:stderr">stderr</a></code> $ stderrHandler -&gt;
  <code><a href="Control-Monad-Log.html#v:withFDHandler">withFDHandler</a></code> <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-IO-Handle-FD.html#v:stdout">stdout</a></code> $ stdoutHandler -&gt;
  <code><a href="Control-Monad-Log.html#v:runLoggingT">runLoggingT</a></code> m
              (<code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#v:choose">choose</a></code> (message -&gt;
                        case <code><a href="Control-Monad-Log.html#v:msgUrgency">msgUrgency</a></code> message of
                          <code><a href="Control-Monad-Log.html#v:Error">Error</a></code> -&gt; <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Either.html#v:Left">Left</a></code> message
                          _ -&gt; <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Either.html#v:Right">Right</a></code> message)
                      (<code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#v:contramap">contramap</a></code> (<code><a href="Control-Monad-Log.html#v:renderWithUrgency">renderWithUrgency</a></code> <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Function.html#v:id">id</a></code>) stdoutHandler)
                      (<code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#v:contramap">contramap</a></code> (<code><a href="Control-Monad-Log.html#v:renderWithUrgency">renderWithUrgency</a></code> (T.<code><a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#v:map">map</a></code> <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Char.html#v:toUpper">toUpper</a></code>)) stdoutHandler))
</pre></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadLog">MonadLog</a> message m | m -&gt; message <span class="keyword">where</span><ul class="subs"><li><a href="#v:logMessage">logMessage</a> :: message -&gt; m ()</li></ul></li><li class="src short"><a href="#v:mapLogMessage">mapLogMessage</a> :: <a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a> message' m =&gt; (message -&gt; message') -&gt; <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m a -&gt; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:LoggingT">LoggingT</a> message m a</li><li class="src short"><span class="keyword">pattern</span> <a href="#v:LoggingT">LoggingT</a> ::   (<a href="Control-Monad-Log.html#t:Handler">Handler</a> t t -&gt; t t) -&gt; <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> t t t</li><li class="src short"><a href="#v:runLoggingT">runLoggingT</a> :: <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m a -&gt; <a href="Control-Monad-Log.html#t:Handler">Handler</a> m message -&gt; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Handler">Handler</a> m message</li><li class="src short"><span class="keyword">pattern</span> <a href="#v:Handler">Handler</a> ::   (b -&gt; m ()) -&gt; <a href="Control-Monad-Log.html#t:Handler">Handler</a> m b</li><li class="src short"><a href="#v:withFDHandler">withFDHandler</a> :: <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> io =&gt; <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; (<a href="Control-Monad-Log.html#t:Handler">Handler</a> io <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a> -&gt; io a) -&gt; io a</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:WithTimestamp">WithTimestamp</a> a = <a href="#v:WithTimestamp">WithTimestamp</a> {<ul class="subs"><li><a href="#v:unWithTimestamp">unWithTimestamp</a> :: (<a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/time-1.5.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>, a)</li></ul>}</li><li class="src short"><a href="#v:withTimestamps">withTimestamps</a> :: (<a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a> (<a href="Control-Monad-Log.html#t:WithTimestamp">WithTimestamp</a> message) m, <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m a -&gt; m a</li><li class="src short"><a href="#v:renderWithUrgency">renderWithUrgency</a> :: (a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a>) -&gt; <a href="Control-Monad-Log.html#t:WithUrgency">WithUrgency</a> a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:WithUrgency">WithUrgency</a> a = <a href="#v:WithUrgency">WithUrgency</a> {<ul class="subs"><li><a href="#v:msgUrgency">msgUrgency</a> :: <a href="Control-Monad-Log.html#t:Urgency">Urgency</a></li><li><a href="#v:discardUrgency">discardUrgency</a> :: a</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Urgency">Urgency</a><ul class="subs"><li>= <a href="#v:Info">Info</a></li><li>| <a href="#v:Debug">Debug</a></li><li>| <a href="#v:Warning">Warning</a></li><li>| <a href="#v:Error">Error</a></li></ul></li><li class="src short"><a href="#v:renderWithTimestamp">renderWithTimestamp</a> :: (a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a>) -&gt; <a href="Control-Monad-Log.html#t:WithTimestamp">WithTimestamp</a> a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></li></ul></div><div id="interface"><h1 id="g:1"><code>MonadLog</code></h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:MonadLog" class="def">MonadLog</a> message m | m -&gt; message <span class="keyword">where</span></p><div class="doc"><p>The class of monads that support logging.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:logMessage" class="def">logMessage</a> :: message -&gt; m ()</p><div class="doc"><p>Append a message to the log for this computation.</p></div></div><div class="subs instances"><p id="control.i:MonadLog" class="caption collapser" onclick="toggleSection('i:MonadLog')">Instances</p><div id="section.i:MonadLog" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a> message (<a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:mapLogMessage" class="def">mapLogMessage</a> :: <a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a> message' m =&gt; (message -&gt; message') -&gt; <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m a -&gt; m a</p><div class="doc"><p>Re-interpret the log messages in one computation. This can be useful to
 embed a computation with one log type in a larger general computation.</p></div></div><h1 id="g:2"><code>LoggingT</code>, a general handler</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LoggingT" class="def">LoggingT</a> message m a</p><div class="doc"><p><code><a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a></code> is a very general handler for the <code><a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a></code> effect. Whenever a
 log entry is emitted, the given <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code> is invoked, producing some
 side-effect (such as writing to <code>stdout</code>, or appending a database table).</p></div><div class="subs instances"><p id="control.i:LoggingT" class="caption collapser" onclick="toggleSection('i:LoggingT')">Instances</p><div id="section.i:LoggingT" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a> message (<a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> (<a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Functor.html#t:Functor">Functor</a> m =&gt; <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Functor.html#t:Functor">Functor</a> (<a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Applicative.html#t:Applicative">Applicative</a> m =&gt; <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a name="v:LoggingT" class="def">LoggingT</a> ::   (<a href="Control-Monad-Log.html#t:Handler">Handler</a> t t -&gt; t t) -&gt; <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> t t t</p></div><div class="top"><p class="src"><a name="v:runLoggingT" class="def">runLoggingT</a> :: <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m a -&gt; <a href="Control-Monad-Log.html#t:Handler">Handler</a> m message -&gt; m a</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Handler" class="def">Handler</a> m message</p><div class="doc"><p>Handlers are mechanisms to interpret the meaning of logging as an action
 in the underlying monad. The instances of <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#t:Contravariant">Contravariant</a></code>, <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#t:Decidable">Decidable</a></code> and
 <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#t:Divisible">Divisible</a></code> can all be used to adapt <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code>s so they can be used in
 different contexts.</p></div><div class="subs instances"><p id="control.i:Handler" class="caption collapser" onclick="toggleSection('i:Handler')">Instances</p><div id="section.i:Handler" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Applicative.html#t:Applicative">Applicative</a> m =&gt; <a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#t:Divisible">Divisible</a> (<a href="Control-Monad-Log.html#t:Handler">Handler</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Applicative.html#t:Applicative">Applicative</a> m =&gt; <a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#t:Decidable">Decidable</a> (<a href="Control-Monad-Log.html#t:Handler">Handler</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#t:Contravariant">Contravariant</a> (<a href="Control-Monad-Log.html#t:Handler">Handler</a> m)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a name="v:Handler" class="def">Handler</a> ::   (b -&gt; m ()) -&gt; <a href="Control-Monad-Log.html#t:Handler">Handler</a> m b</p></div><div class="top"><p class="src"><a name="v:withFDHandler" class="def">withFDHandler</a> :: <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> io =&gt; <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; (<a href="Control-Monad-Log.html#t:Handler">Handler</a> io <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a> -&gt; io a) -&gt; io a</p><div class="doc"><p><code>newFDHandler</code> creates a new <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code> that will append a given file
 descriptor (or <code><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-IO-Handle.html#t:Handle">Handle</a></code>, as it is known in the &quot;base&quot; library). Note that
 this <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code> requires log messages to be of type <code><a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></code>. You can use
 <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant.html#v:contramap">contramap</a></code>, <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#v:divide">divide</a></code> and <code><a href="file:///nix/store/82l846ffagnj35iydb5yia1dggycjx7n-contravariant-1.3.3/share/doc/x86_64-linux-ghc-7.10.2/contravariant-1.3.3/html/Data-Functor-Contravariant-Divisible.html#v:choose">choose</a></code> to adapt <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code>s appropriately.</p><p>These <code><a href="Control-Monad-Log.html#t:Handler">Handler</a></code>s asynchronously log messages to the given file descriptor,
 rather than blocking.</p></div></div><h1 id="g:3">Message wrappers</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:WithTimestamp" class="def">WithTimestamp</a> a</p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:WithTimestamp" class="def">WithTimestamp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:unWithTimestamp" class="def">unWithTimestamp</a> :: (<a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/time-1.5.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>, a)</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:withTimestamps" class="def">withTimestamps</a> :: (<a href="Control-Monad-Log.html#t:MonadLog">MonadLog</a> (<a href="Control-Monad-Log.html#t:WithTimestamp">WithTimestamp</a> message) m, <a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Control-Monad-Log.html#t:LoggingT">LoggingT</a> message m a -&gt; m a</p><div class="doc"><p>Add timestamps to all messages logged. Timestamps will be calculated
 synchronously when log entries are emitted.</p></div></div><div class="top"><p class="src"><a name="v:renderWithUrgency" class="def">renderWithUrgency</a> :: (a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a>) -&gt; <a href="Control-Monad-Log.html#t:WithUrgency">WithUrgency</a> a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:WithUrgency" class="def">WithUrgency</a> a</p><div class="doc"><p>Add &quot;urgency&quot; information to a log message. This is often used to convey
 how significant a log message is.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:WithUrgency" class="def">WithUrgency</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:msgUrgency" class="def">msgUrgency</a> :: <a href="Control-Monad-Log.html#t:Urgency">Urgency</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:discardUrgency" class="def">discardUrgency</a> :: a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Urgency" class="def">Urgency</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Info" class="def">Info</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Debug" class="def">Debug</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Warning" class="def">Warning</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Error" class="def">Error</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Urgency" class="caption collapser" onclick="toggleSection('i:Urgency')">Instances</p><div id="section.i:Urgency" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///nix/store/i1hrwr3ndgxypnxfm5np853wppnc67b3-ghc-7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Text-Show.html#t:Show">Show</a> <a href="Control-Monad-Log.html#t:Urgency">Urgency</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:renderWithTimestamp" class="def">renderWithTimestamp</a> :: (a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a>) -&gt; <a href="Control-Monad-Log.html#t:WithTimestamp">WithTimestamp</a> a -&gt; <a href="file:///nix/store/hhgl8cim3lmj2msrm52ias4l901f5lqp-text-1.2.1.3/share/doc/x86_64-linux-ghc-7.10.2/text-1.2.1.3/html/Data-Text.html#t:Text">Text</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>